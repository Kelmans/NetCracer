<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link type="text/css" rel="stylesheet" href="../styles/index.css">
    <script type="text/javascript" src="../scripts/index.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript" src="../jquery-3.3.1.min.js"></script>
</head>
<body>
    <div class="content">
        <div class="container">
            <div class=" cont_Button">
                <div id="adds" class="  add_button"><input type="button" class="button"  value="add"></div>
                <div class=" remove_button"><input type="button" class="button"  value="Remove"></div>
            </div>
             <table id="tab">
            <caption>Tree table</caption>
            <thead >
            <tr id="tablHead">
                <th><div id="box" class="decor_checkbox "><span> <input type="checkbox"></span></div></th>
                <th  id="sl"  data-type="string" ><div class="nameLine" ><span class="head_text">Name</span><div class="filtr"></div><div class="gl_str "></div></div> </th>
                <th id="nm" ><div class="statusHead"><span>Statuses</span><div class="filtr"></div><div class="gl_str "></div></div></th>
                <th  id="km"><div class="autHead"><div>Authentication</div><div  class="filtr"></div><div class="gl_str "></div></div></th>
                <th  id="lm"><div class="loginHead"><div>Last By Login</div><div class="gl_str "></div></div></th>
                <th></th>
            </tr>
            </thead>
                 <tbody>
            <tr>
                <td><div  class="decor_checkbox der"><span> <input type="checkbox" class="inp"></span></div></td>
                <td ><div class="nameLine"><div class="text_Line">Abaa</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Enabled</div></div></td>
                <td><div class="autLine"><div>LDAP</div></div></td>
                <td><div class="loginLine"><div>23:42 / 31 july 2013</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div>
                </td>
            </tr>
            <tr>
                <td><div  class="decor_checkbox der"><span> <input type="checkbox"  class="inp"></span></div></td>
                <td><div class="nameLine"><div  class="text_Line">Eda</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Disabled</div></div></td>
                <td><div class="autLine"><div>ADLPs</div></div></td>
                <td><div class="loginLine"><div>22:42 / 31 july 2015</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div></td>
            </tr>
            <tr>
                <td><div  class="decor_checkbox der"><span> <input type="checkbox"  class="inp"></span></div></td>
                <td><div class="nameLine"><div  class="text_Line">Baooa</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Enabled</div></div></td>
                <td><div class="autLine"><div>ADLP</div></div></td>
                <td><div class="loginLine"><div>20:42 / 31 july 2014</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div></td>
            </tr>
            <tr>
                <td><div  class="decor_checkbox der"><span> <input type="checkbox"  class="inp"></span></div></td>
                <td><div class="nameLine"><div  class="text_Line">Codssss</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Disabled</div></div></td>
                <td><div class="autLine"><div>LDAP</div></div></td>
                <td><div class="loginLine"><div>18:42 / 31 july 2015</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div></td>
            </tr>
            <tr>
                <td><div  class="decor_checkbox der"><span> <input type="checkbox"  class="inp"></span></div></td>
                <td><div class="nameLine"><div  class="text_Line">Acoodsa</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Enabled</div></div></td>
                <td><div class="autLine"><div>ADLP</div></div></td>
                <td><div class="loginLine"><div>16:42 / 31 july 2017</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div></td>
            </tr>
            <tr>
                <td><div class="decor_checkbox der"><span> <input type="checkbox" class="inp" ></span></div></td>
                <td><div class="nameLine"><div  class="text_Line">WaodsSa</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Disabled</div></div></td>
                <td><div class="autLine"><div>LDAP</div></div></td>
                <td><div class="loginLine"><div>12:42 / 31 july 2016</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div></td>
            </tr>
            <tr>
                <td><div  class="decor_checkbox der"><span> <input type="checkbox"  class="inp"></span></div></td>
                <td><div class="nameLine"><div  class="text_Line">BwodsSam</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Enabled</div></div></td>
                <td><div class="autLine"><div>DAPL</div></div></td>
                <td><div class="loginLine"><div>10:42 / 3 july 2016</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div></td>
            </tr>
            <tr>
                <td><div class="decor_checkbox der"><span> <input type="checkbox" class="inp"></span></div></td>
                <td><div class="nameLine"><div  class="text_Line">CdodsSaaa</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Disabled</div></div></td>
                <td><div class="autLine"><div>LDAP</div></div></td>
                <td><div class="loginLine"><div>8:42 / 31 july 2016</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div></td>
            </tr>
            <tr>
<!--                <td><label class="checkbox-item"><input hidden type="checkbox"><span class="checker"></span></label></td>-->
                <td><div  class="decor_checkbox der"><span> <input type="checkbox" class="inp"></span></div></td>
                <td><div class="nameLine"><div  class="text_Line">DsodsSamaa</div> <div class="secured"></div></div></td>
                <td><div class="statusLine"> <div>Enabled</div></div></td>
                <td><div class="autLine"><div>DAPL</div></div></td>
                <td><div class="loginLine"><div>6:42 / 31 july 2017</div></div></td>
                <td><div class="container_img"><div class="container_img-item"></div></div></td>
            </tr>
                 </tbody>
            </table>
        </div>
<!--        <div class="fon"></div>-->
    </div>
<script>
    $(document).ready(function() {
        var count = 0;
        var chet = 0;
        // при клике по диву, делаем проверку
        $(document).on('click', '.decor_checkbox', function () {
            var checkbox = $(this).find('input[type=checkbox]');
            // если чекбокс был активен
            if (checkbox.prop("checked")) {
                // снимаем класс с родительского дива
                $(this).removeClass("check_active");

                // и снимаем галочку с чекбокса
                checkbox.prop("checked", false);
                // если чекбокс не был активен
            } else {
                // добавляем класс родительскому диву
                $(this).addClass("check_active");

                // ставим галочку в чекбоксе
                checkbox.prop("checked", true);
            }
        });
        $(document).on('click', '#box', function () {
            var checkboxs = $(this).find('input[type=checkbox]');
            if (checkboxs.prop("checked")) { //включен
                $('.decor_checkbox input:checkbox').prop('checked', true);
                $('.decor_checkbox').not(this).addClass("check_active");

            } else { //выключен
                $('.decor_checkbox input:checkbox').prop('checked', false);
                $('.decor_checkbox').not(this).removeClass("check_active");

            }
        });
        $(document).on('click', '.decor_checkbox', function () {
            var inps = document.getElementsByTagName('tr');
            var count = $('.inp[type=checkbox]:checked').length;
            if (count == inps.length - 1) {
                $('#box').addClass("check_active");
            } else {
                $('#box').removeClass("check_active");
            }
        });
        $('#adds').click(function () {
            if (count == 0) {
                $('#tab')
                    .append($('<tr>')
                        .append($('<td>').append($('<div class="decor_checkbox der">').append($('<span>').append($('<input type="checkbox" class="inp" >')))))
                        .append($('<td>').append($('<div class="nameLine ">').append($('<div>').append('<input type=text  id="names"class="inpt inpt1">'), $('<div class="secured">'))))
                        .append($('<td>').append($('<div class="statusLine">').append($('<div>').append('<input type=text id="names1"class="inpt inpt2">'))))
                        .append($('<td>').append($('<div class="autLine ">').append($('<div>').append('<input type=text id="names2"  class="inpt inpt3">'))))
                        .append($('<td>').append($('<div class="loginLine ">').append($('<div>').append('<input type=text id="names3" class="inpt inpt4">'))))
                        .append($('<td>').append($('<div class="container_img">').append($('<div id="qwe" class="container_img-item2">'))))
                    )
                $('.decor_checkbox input:checkbox').prop('checked', false);
                $('.decor_checkbox').not(this).removeClass("check_active");
                $('div.nameLine').addClass('nameLine');
                count++;
            } else {
                alert("Заполните предыдущую строку и нажмите 'ОК' ");

            }
        });
        $(document).on('click', '.container_img-item2', function () {
            if (document.getElementById("names").value === '' || document.getElementById("names1").value === '' || document.getElementById("names2").value === '' || document.getElementById("names3").value === '') {
                alert("Заполните все поля")
            } else {
                $(this).addClass("container_img-item");
                $('input[type=text]').prop('disabled', true);
                $('input[type=text]').addClass('scr');
                $(this).removeClass("container_img-item2");
                count--;
            }

        });
        // $(document).on('click','.remove_button',function(){
        //     var checked = [];
        //     $('input:checkbox:checked').each(function() {
        //         checked.push($(this).val());
        //     for (i = 0; i < checked.length; ++i) {
        //         checked[index].setAttribute('class', 'sr');
        //
        //         }});
        // });


        $('.remove_button').click(function () {

            $('tbody input:checkbox:checked').each(function () {
                if (count == 0) {
                    $(this).parents('tr').addClass('sr')
                } //else if( strok == 0 ){
                // $(this).parents('tr').removeClass('sr')
                //   }
                else {
                    alert("Закончите с новой строкой перед удалением любой другой");
                }

            })
        });

            function sortTable(f, n) {
                var rows = $('#tab tbody  tr').get();

                //  rows = rows.replace(/\s/g, '');
                rows.sort(function (a, b) {

                    var A = getVal(a);
                    var B = getVal(b);

                    if (A < B) {
                        return -1 * f;
                    }
                    if (A > B) {
                        return 1 * f;
                    }
                    return 0;
                });

                function getVal(elm) {
                    var v = $(elm).children('td').eq(n).text().toUpperCase();
                    if ($.isNumeric(v)) {
                        v = parseInt(v, 10);
                    }
                    return v;
                }

                $.each(rows, function (index, row) {
                    $('#tab').children('tbody').append(row);
                });
                chet++;
            }

            var f_sl = 1;
            var f_nm = 1;
            var f_km = 1;
            var f_lm = 1;
            var rowsOne = $('#tab tbody  tr').get();
            $(document).on('click', '#sl', function () {
                //   $('.gl_strTwo').css('opacity', '0');
                $('.gl_str').addClass('gl_strOpa');
                $('.decor_checkbox input:checkbox').prop('checked', false);
                $('.decor_checkbox').not(this).removeClass("check_active");
                if (chet == 0 || chet == 1) {
                    f_sl *= -1; // toggle the sorting order
                    var n = $(this).prevAll().length;
                    sortTable(f_sl, n);
                } else {
                    $.each(rowsOne, function (index, row) {
                        $('#tab').children('tbody').append(row);

                    });
                    chet = 0;
                }
            });

            $(document).on('click', '#nm', function () {

                $('.decor_checkbox input:checkbox').prop('checked', false);
                $('.decor_checkbox').not(this).removeClass("check_active");
                if (chet == 0 || chet == 1) {

                    f_nm *= -1; // toggle the sorting order
                    var n = $(this).prevAll().length;
                    sortTable(f_nm, n);
                } else {
                    $.each(rowsOne, function (index, row) {
                        $('#tab').children('tbody').append(row);

                    });
                    chet = 0;
                }
            });

            $(document).on('click', '#km', function () {
                $('.gl_str').addClass('gl_strOpa');
                $('.decor_checkbox input:checkbox').prop('checked', false);
                $('.decor_checkbox').not(this).removeClass("check_active");
                if (chet == 0 || chet == 1) {
                    f_km *= -1; // toggle the sorting order
                    var n = $(this).prevAll().length;
                    sortTable(f_km, n);
                } else {
                    $.each(rowsOne, function (index, row) {
                        $('#tab').children('tbody').append(row);

                    });
                    chet = 0;
                }
            });
            $(document).on('click', '#lm', function () {

                $('.decor_checkbox input:checkbox').prop('checked', false);
                $('.decor_checkbox').not(this).removeClass("check_active");
                if (chet == 0 || chet == 1) {
                    f_lm *= -1; // toggle the sorting order
                    var n = $(this).prevAll().length;
                    sortTable(f_lm, n);
                } else {
                    $.each(rowsOne, function (index, row) {
                        $('#tab').children('tbody').append(row);

                    });
                    chet = 0;
                }
            });


            // var tbody = document.getElementsByTagName('tbody')[0];
            // var rows = [];
            // var rows1 = [];
            // var rows2 = [];
            //
            //
            // for (var i = tbody.children.length - 1; i >= 0; i--) {
            //     var child = tbody.removeChild(tbody.children[i]);
            //     rows.push(child);
            // }
            // for (var i = 0; i < rows.length; i++) {
            //     rows1.push(rows[i].children)
            //      }
            //
            // for (var i = 0; i < rows1.length; i++) {
            //     rows2.push(rows1[i].children)
            // }
            // rows.sort(function(a, b) {
            //     return $(a).children('td').textContent - b.textContent;
            // })
            //
            // for (var i = 0; i < rows.length; i++) {
            //     tbody.appendChild(rows[i]);
            // }

            // var usl =  $('td');
            // var liArr = usl.children('.nameLine').get();
            // var arr = new Array()
            // for (var i = 0; i < liArr.length; i++) {
            //     arr.push(liArr[i].textContent)
            // }
            //
            // arr.sort(function(a, b){
            //     return b.length - a.length
            // })
            // arr.forEach(function(content, index) {
            //     liArr[index].textContent = content
            // })

            // var mylist = $('.nameLine');
            // var listitems = mylist.children('.text_Line').get();
            // listitems.sort(function(a, b) {
            //     return $(a).text().toUpperCase().localeCompare($(b).text().toUpperCase());
            // })
            // $.each(listitems, function(idx, itm) { mylist.append(itm); });


           //  var mylist = $('.nameLine');
           //  let tbody = mylist.children('.text_Line').get();
           // // let tbody = document.getElementsByClassName('.text_Line');
           //  var newColl = []
           //  for (var i = tbody.length - 1; i >= 0; i--) {
           //      newColl.push(tbody[i]);
           //  }
           //  newColl.sort(function(a, b) {
           //          return a.text - b.text;
           //      });
           //      $.each(newColl, function(index, item) {
           //          mylist.append(item);
           //      });

            // var mylists = $('.nameLine');
            // var listitems = mylists.children('.text_Line').get();
            // listitems.sort(function(a, b) {
            //     var compA = $(a).text().toUpperCase();
            //     var compB = $(b).text().toUpperCase();
            //     return (compA < compB) ? -1 : (compA > compB) ? 1 : 0;
            // })
            // $.each(listitems, function(idx, itm) { mylists.append(itm); });


    });
</script>

</body>
</html>